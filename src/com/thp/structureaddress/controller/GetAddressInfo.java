package com.thp.structureaddress.controller;

import org.apache.commons.lang.StringUtils;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.ResponseBody;

import com.alibaba.fastjson.JSONObject;
import com.thp.structureaddress.model.getuserandaddressrelation.AddressAndUserRelation;
import com.thp.structureaddress.service.getusersnoraddresssn.GetUsersnOrAddresssnService;
import com.thp.structureaddress.util.HttpClientCallSoapUtil;
/**
 * 
 * @author dingjinyang
 * 2.1.4通过用户编号来获取该用户的经纬度信息
 * 1.根据用户编号获取地址序号
 * 2.根据地址序号调用结构化地址获得经纬度信息
 */
@Controller
@RequestMapping("GetAddressInfo")
public class GetAddressInfo {
	private Logger logger=LoggerFactory.getLogger(GetAddressInfo.class);
	@Autowired
	private GetUsersnOrAddresssnService getUsersnOrAddresssnService;

	
	@Value("${ForwardAddressServerURL}")
	private String serverURL;
	
	public void setServerURL(String serverURL) {
		this.serverURL = serverURL;
	}
	public String getServerURL() {
		return serverURL;
	}
	
	@RequestMapping("/getAddressInfo")
	public@ResponseBody JSONObject getAddressInfo(String userSN){
		logger.info("调用用户编号获取用户经纬度信息接口-------------------");
		JSONObject json=new JSONObject();
		AddressAndUserRelation relationInfo=null;
		String guid="";
		String addressInfoXML="";
		
		if(userSN==null){
			json.put("code", 1);
			json.put("message", "未接收到用户编号");
			json.put("addressInfo","");
			return json;
		}
		//获取结构化地址id
		relationInfo=getUsersnOrAddresssnService.getAddressSN(userSN);
		if(relationInfo!=null){
			guid=relationInfo.getAddressId();
			//根据结构化地址id获得结构化地址信息
			if(StringUtils.isNotEmpty(guid)){
				addressInfoXML=getAddressReserveInfo(guid);
			}
		}
		
//		addressInfoXML="<soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\"><soap:Body><getGetStrucAddressResponse xmlns=\"http://soa.csg.cn\"><soa:STRUCADDR_OUT><soa:CXBZ>1</soa:CXBZ><soa:GUID>0001</soa:GUID><soa:SJQHDM>sjqhdm</soa:SJQHDM><soa:SJQHMC>sjqhmc</soa:SJQHMC><soa:QXDM>QXDM</soa:QXDM><soa:QXMC>QXMC</soa:QXMC><soa:XZDM>XZDM</soa:XZDM><soa:XZMC>XZMC</soa:XZMC><soa:ZRCQHDM>ZRCQHDM</soa:ZRCQHDM><soa:ZRCQHMC>ZRCQHMC</soa:ZRCQHMC><soa:JLXDM>JLXDM</soa:JLXDM><soa:JLXMC>JLXMC</soa:JLXMC><soa:MPDM>MPDM</soa:MPDM><soa:MPMC>MPMC</soa:MPMC><soa:JZWDM>JZWDM</soa:JZWDM><soa:JZWMC>JZWMC</soa:JZWMC><soa:DYDM>DYDM</soa:DYDM><soa:DYMC>DYMC</soa:DYMC><soa:LCH>LCH</soa:LCH><soa:FJDM>FJDM</soa:FJDM><soa:FJMC>FJMC</soa:FJMC><soa:DZQC>GG布衣钟落潭镇五龙岗钟升东路钟兴商业广场</soa:DZQC><soa:BM>GG布衣</soa:BM><soa:ZXJD>113.6464041</soa:ZXJD><soa:ZXWD>23.804897</soa:ZXWD><soa:SYZTDM>SYZTDM</soa:SYZTDM><soa:QYSJ>QYSJ</soa:QYSJ><soa:TYSJ>TYSJ</soa:TYSJ><soa:GXSJ>GXSJ</soa:GXSJ><soa:PPD>PPD</soa:PPD><soa:BYZD1>BYZD1</soa:BYZD1><soa:BYZD2>BYZD2</soa:BYZD2><soa:BYZD3>BYZD3</soa:BYZD3></soa:STRUCADDR_OUT><soa:STRUCADDR_OUT><soa:CXBZ>1</soa:CXBZ><soa:GUID>0002</soa:GUID><soa:SJQHDM>sjqhdm</soa:SJQHDM><soa:SJQHMC>sjqhmc</soa:SJQHMC><soa:QXDM>QXDM</soa:QXDM><soa:QXMC>QXMC</soa:QXMC><soa:XZDM>XZDM</soa:XZDM><soa:XZMC>XZMC</soa:XZMC><soa:ZRCQHDM>ZRCQHDM</soa:ZRCQHDM><soa:ZRCQHMC>ZRCQHMC</soa:ZRCQHMC><soa:JLXDM>JLXDM</soa:JLXDM><soa:JLXMC>JLXMC</soa:JLXMC><soa:MPDM>MPDM</soa:MPDM><soa:MPMC>MPMC</soa:MPMC><soa:JZWDM>JZWDM</soa:JZWDM><soa:JZWMC>JZWMC</soa:JZWMC><soa:DYDM>DYDM</soa:DYDM><soa:DYMC>DYMC</soa:DYMC><soa:LCH>LCH</soa:LCH><soa:FJDM>FJDM</soa:FJDM><soa:FJMC>FJMC</soa:FJMC><soa:DZQC>GG布衣钟落潭镇五龙岗钟升东路钟兴商业广场</soa:DZQC><soa:BM>GG布衣</soa:BM><soa:ZXJD>113.9395841</soa:ZXJD><soa:ZXWD>23.20153624</soa:ZXWD><soa:SYZTDM>SYZTDM</soa:SYZTDM><soa:QYSJ>QYSJ</soa:QYSJ><soa:TYSJ>TYSJ</soa:TYSJ><soa:GXSJ>GXSJ</soa:GXSJ><soa:PPD>PPD</soa:PPD><soa:BYZD1>BYZD1</soa:BYZD1><soa:BYZD2>BYZD2</soa:BYZD2><soa:BYZD3>BYZD3</soa:BYZD3></soa:STRUCADDR_OUT><soa:STRUCADDR_OUT><soa:CXBZ>1</soa:CXBZ><soa:GUID>0003</soa:GUID><soa:SJQHDM>sjqhdm</soa:SJQHDM><soa:SJQHMC>sjqhmc</soa:SJQHMC><soa:QXDM>QXDM</soa:QXDM><soa:QXMC>QXMC</soa:QXMC><soa:XZDM>XZDM</soa:XZDM><soa:XZMC>XZMC</soa:XZMC><soa:ZRCQHDM>ZRCQHDM</soa:ZRCQHDM><soa:ZRCQHMC>ZRCQHMC</soa:ZRCQHMC><soa:JLXDM>JLXDM</soa:JLXDM><soa:JLXMC>JLXMC</soa:JLXMC><soa:MPDM>MPDM</soa:MPDM><soa:MPMC>MPMC</soa:MPMC><soa:JZWDM>JZWDM</soa:JZWDM><soa:JZWMC>JZWMC</soa:JZWMC><soa:DYDM>DYDM</soa:DYDM><soa:DYMC>DYMC</soa:DYMC><soa:LCH>LCH</soa:LCH><soa:FJDM>FJDM</soa:FJDM><soa:FJMC>FJMC</soa:FJMC><soa:DZQC>GG布衣钟落潭镇五龙岗钟升东路钟兴商业广场</soa:DZQC><soa:BM>GG布衣</soa:BM><soa:ZXJD>113.7923722</soa:ZXJD><soa:ZXWD>23.17600954</soa:ZXWD><soa:SYZTDM>SYZTDM</soa:SYZTDM><soa:QYSJ>QYSJ</soa:QYSJ><soa:TYSJ>TYSJ</soa:TYSJ><soa:GXSJ>GXSJ</soa:GXSJ><soa:PPD>PPD</soa:PPD><soa:BYZD1>BYZD1</soa:BYZD1><soa:BYZD2>BYZD2</soa:BYZD2><soa:BYZD3>BYZD3</soa:BYZD3></soa:STRUCADDR_OUT><soa:STRUCADDR_OUT><soa:CXBZ>1</soa:CXBZ><soa:GUID>0004</soa:GUID><soa:SJQHDM>sjqhdm</soa:SJQHDM><soa:SJQHMC>sjqhmc</soa:SJQHMC><soa:QXDM>QXDM</soa:QXDM><soa:QXMC>QXMC</soa:QXMC><soa:XZDM>XZDM</soa:XZDM><soa:XZMC>XZMC</soa:XZMC><soa:ZRCQHDM>ZRCQHDM</soa:ZRCQHDM><soa:ZRCQHMC>ZRCQHMC</soa:ZRCQHMC><soa:JLXDM>JLXDM</soa:JLXDM><soa:JLXMC>JLXMC</soa:JLXMC><soa:MPDM>MPDM</soa:MPDM><soa:MPMC>MPMC</soa:MPMC><soa:JZWDM>JZWDM</soa:JZWDM><soa:JZWMC>JZWMC</soa:JZWMC><soa:DYDM>DYDM</soa:DYDM><soa:DYMC>DYMC</soa:DYMC><soa:LCH>LCH</soa:LCH><soa:FJDM>FJDM</soa:FJDM><soa:FJMC>FJMC</soa:FJMC><soa:DZQC>GG布衣钟落潭镇五龙岗钟升东路钟兴商业广场</soa:DZQC><soa:BM>GG布衣</soa:BM><soa:ZXJD>113.6387676</soa:ZXJD><soa:ZXWD>23.5816404</soa:ZXWD><soa:SYZTDM>SYZTDM</soa:SYZTDM><soa:QYSJ>QYSJ</soa:QYSJ><soa:TYSJ>TYSJ</soa:TYSJ><soa:GXSJ>GXSJ</soa:GXSJ><soa:PPD>PPD</soa:PPD><soa:BYZD1>BYZD1</soa:BYZD1><soa:BYZD2>BYZD2</soa:BYZD2><soa:BYZD3>BYZD3</soa:BYZD3></soa:STRUCADDR_OUT><soa:STRUCADDR_OUT><soa:CXBZ>1</soa:CXBZ><soa:GUID>0005</soa:GUID><soa:SJQHDM>sjqhdm</soa:SJQHDM><soa:SJQHMC>sjqhmc</soa:SJQHMC><soa:QXDM>QXDM</soa:QXDM><soa:QXMC>QXMC</soa:QXMC><soa:XZDM>XZDM</soa:XZDM><soa:XZMC>XZMC</soa:XZMC><soa:ZRCQHDM>ZRCQHDM</soa:ZRCQHDM><soa:ZRCQHMC>ZRCQHMC</soa:ZRCQHMC><soa:JLXDM>JLXDM</soa:JLXDM><soa:JLXMC>JLXMC</soa:JLXMC><soa:MPDM>MPDM</soa:MPDM><soa:MPMC>MPMC</soa:MPMC><soa:JZWDM>JZWDM</soa:JZWDM><soa:JZWMC>JZWMC</soa:JZWMC><soa:DYDM>DYDM</soa:DYDM><soa:DYMC>DYMC</soa:DYMC><soa:LCH>LCH</soa:LCH><soa:FJDM>FJDM</soa:FJDM><soa:FJMC>FJMC</soa:FJMC><soa:DZQC>GG布衣钟落潭镇五龙岗钟升东路钟兴商业广场</soa:DZQC><soa:BM>GG布衣</soa:BM><soa:ZXJD>113.7025026</soa:ZXJD><soa:ZXWD>23.061029196</soa:ZXWD><soa:SYZTDM>SYZTDM</soa:SYZTDM><soa:QYSJ>QYSJ</soa:QYSJ><soa:TYSJ>TYSJ</soa:TYSJ><soa:GXSJ>GXSJ</soa:GXSJ><soa:PPD>PPD</soa:PPD><soa:BYZD1>BYZD1</soa:BYZD1><soa:BYZD2>BYZD2</soa:BYZD2><soa:BYZD3>BYZD3</soa:BYZD3></soa:STRUCADDR_OUT><soa:STRUCADDR_OUT><soa:CXBZ>1</soa:CXBZ><soa:GUID>0006</soa:GUID><soa:SJQHDM>sjqhdm</soa:SJQHDM><soa:SJQHMC>sjqhmc</soa:SJQHMC><soa:QXDM>QXDM</soa:QXDM><soa:QXMC>QXMC</soa:QXMC><soa:XZDM>XZDM</soa:XZDM><soa:XZMC>XZMC</soa:XZMC><soa:ZRCQHDM>ZRCQHDM</soa:ZRCQHDM><soa:ZRCQHMC>ZRCQHMC</soa:ZRCQHMC><soa:JLXDM>JLXDM</soa:JLXDM><soa:JLXMC>JLXMC</soa:JLXMC><soa:MPDM>MPDM</soa:MPDM><soa:MPMC>MPMC</soa:MPMC><soa:JZWDM>JZWDM</soa:JZWDM><soa:JZWMC>JZWMC</soa:JZWMC><soa:DYDM>DYDM</soa:DYDM><soa:DYMC>DYMC</soa:DYMC><soa:LCH>LCH</soa:LCH><soa:FJDM>FJDM</soa:FJDM><soa:FJMC>FJMC</soa:FJMC><soa:DZQC>GG布衣钟落潭镇五龙岗钟升东路钟兴商业广场</soa:DZQC><soa:BM>GG布衣</soa:BM><soa:ZXJD>113.46075946</soa:ZXJD><soa:ZXWD>23.081561804</soa:ZXWD><soa:SYZTDM>SYZTDM</soa:SYZTDM><soa:QYSJ>QYSJ</soa:QYSJ><soa:TYSJ>TYSJ</soa:TYSJ><soa:GXSJ>GXSJ</soa:GXSJ><soa:PPD>PPD</soa:PPD><soa:BYZD1>BYZD1</soa:BYZD1><soa:BYZD2>BYZD2</soa:BYZD2><soa:BYZD3>BYZD3</soa:BYZD3></soa:STRUCADDR_OUT><soa:STRUCADDR_OUT><soa:CXBZ>1</soa:CXBZ><soa:GUID>0007</soa:GUID><soa:SJQHDM>sjqhdm</soa:SJQHDM><soa:SJQHMC>sjqhmc</soa:SJQHMC><soa:QXDM>QXDM</soa:QXDM><soa:QXMC>QXMC</soa:QXMC><soa:XZDM>XZDM</soa:XZDM><soa:XZMC>XZMC</soa:XZMC><soa:ZRCQHDM>ZRCQHDM</soa:ZRCQHDM><soa:ZRCQHMC>ZRCQHMC</soa:ZRCQHMC><soa:JLXDM>JLXDM</soa:JLXDM><soa:JLXMC>JLXMC</soa:JLXMC><soa:MPDM>MPDM</soa:MPDM><soa:MPMC>MPMC</soa:MPMC><soa:JZWDM>JZWDM</soa:JZWDM><soa:JZWMC>JZWMC</soa:JZWMC><soa:DYDM>DYDM</soa:DYDM><soa:DYMC>DYMC</soa:DYMC><soa:LCH>LCH</soa:LCH><soa:FJDM>FJDM</soa:FJDM><soa:FJMC>FJMC</soa:FJMC><soa:DZQC>GG布衣钟落潭镇五龙岗钟升东路钟兴商业广场</soa:DZQC><soa:BM>GG布衣</soa:BM><soa:ZXJD>113.8346568</soa:ZXJD><soa:ZXWD>23.5193349</soa:ZXWD><soa:SYZTDM>SYZTDM</soa:SYZTDM><soa:QYSJ>QYSJ</soa:QYSJ><soa:TYSJ>TYSJ</soa:TYSJ><soa:GXSJ>GXSJ</soa:GXSJ><soa:PPD>PPD</soa:PPD><soa:BYZD1>BYZD1</soa:BYZD1><soa:BYZD2>BYZD2</soa:BYZD2><soa:BYZD3>BYZD3</soa:BYZD3></soa:STRUCADDR_OUT><soa:STRUCADDR_OUT><soa:CXBZ>1</soa:CXBZ><soa:GUID>0008</soa:GUID><soa:SJQHDM>sjqhdm</soa:SJQHDM><soa:SJQHMC>sjqhmc</soa:SJQHMC><soa:QXDM>QXDM</soa:QXDM><soa:QXMC>QXMC</soa:QXMC><soa:XZDM>XZDM</soa:XZDM><soa:XZMC>XZMC</soa:XZMC><soa:ZRCQHDM>ZRCQHDM</soa:ZRCQHDM><soa:ZRCQHMC>ZRCQHMC</soa:ZRCQHMC><soa:JLXDM>JLXDM</soa:JLXDM><soa:JLXMC>JLXMC</soa:JLXMC><soa:MPDM>MPDM</soa:MPDM><soa:MPMC>MPMC</soa:MPMC><soa:JZWDM>JZWDM</soa:JZWDM><soa:JZWMC>JZWMC</soa:JZWMC><soa:DYDM>DYDM</soa:DYDM><soa:DYMC>DYMC</soa:DYMC><soa:LCH>LCH</soa:LCH><soa:FJDM>FJDM</soa:FJDM><soa:FJMC>FJMC</soa:FJMC><soa:DZQC>GG布衣钟落潭镇五龙岗钟升东路钟兴商业广场</soa:DZQC><soa:BM>GG布衣</soa:BM><soa:ZXJD>113.9306973</soa:ZXJD><soa:ZXWD>23.03672701</soa:ZXWD><soa:SYZTDM>SYZTDM</soa:SYZTDM><soa:QYSJ>QYSJ</soa:QYSJ><soa:TYSJ>TYSJ</soa:TYSJ><soa:GXSJ>GXSJ</soa:GXSJ><soa:PPD>PPD</soa:PPD><soa:BYZD1>BYZD1</soa:BYZD1><soa:BYZD2>BYZD2</soa:BYZD2><soa:BYZD3>BYZD3</soa:BYZD3></soa:STRUCADDR_OUT><soa:STRUCADDR_OUT><soa:CXBZ>1</soa:CXBZ><soa:GUID>0009</soa:GUID><soa:SJQHDM>sjqhdm</soa:SJQHDM><soa:SJQHMC>sjqhmc</soa:SJQHMC><soa:QXDM>QXDM</soa:QXDM><soa:QXMC>QXMC</soa:QXMC><soa:XZDM>XZDM</soa:XZDM><soa:XZMC>XZMC</soa:XZMC><soa:ZRCQHDM>ZRCQHDM</soa:ZRCQHDM><soa:ZRCQHMC>ZRCQHMC</soa:ZRCQHMC><soa:JLXDM>JLXDM</soa:JLXDM><soa:JLXMC>JLXMC</soa:JLXMC><soa:MPDM>MPDM</soa:MPDM><soa:MPMC>MPMC</soa:MPMC><soa:JZWDM>JZWDM</soa:JZWDM><soa:JZWMC>JZWMC</soa:JZWMC><soa:DYDM>DYDM</soa:DYDM><soa:DYMC>DYMC</soa:DYMC><soa:LCH>LCH</soa:LCH><soa:FJDM>FJDM</soa:FJDM><soa:FJMC>FJMC</soa:FJMC><soa:DZQC>GG布衣钟落潭镇五龙岗钟升东路钟兴商业广场</soa:DZQC><soa:BM>GG布衣</soa:BM><soa:ZXJD>113.028505325</soa:ZXJD><soa:ZXWD>23.9097956</soa:ZXWD><soa:SYZTDM>SYZTDM</soa:SYZTDM><soa:QYSJ>QYSJ</soa:QYSJ><soa:TYSJ>TYSJ</soa:TYSJ><soa:GXSJ>GXSJ</soa:GXSJ><soa:PPD>PPD</soa:PPD><soa:BYZD1>BYZD1</soa:BYZD1><soa:BYZD2>BYZD2</soa:BYZD2><soa:BYZD3>BYZD3</soa:BYZD3></soa:STRUCADDR_OUT><soa:STRUCADDR_OUT><soa:CXBZ>1</soa:CXBZ><soa:GUID>00010</soa:GUID><soa:SJQHDM>sjqhdm</soa:SJQHDM><soa:SJQHMC>sjqhmc</soa:SJQHMC><soa:QXDM>QXDM</soa:QXDM><soa:QXMC>QXMC</soa:QXMC><soa:XZDM>XZDM</soa:XZDM><soa:XZMC>XZMC</soa:XZMC><soa:ZRCQHDM>ZRCQHDM</soa:ZRCQHDM><soa:ZRCQHMC>ZRCQHMC</soa:ZRCQHMC><soa:JLXDM>JLXDM</soa:JLXDM><soa:JLXMC>JLXMC</soa:JLXMC><soa:MPDM>MPDM</soa:MPDM><soa:MPMC>MPMC</soa:MPMC><soa:JZWDM>JZWDM</soa:JZWDM><soa:JZWMC>JZWMC</soa:JZWMC><soa:DYDM>DYDM</soa:DYDM><soa:DYMC>DYMC</soa:DYMC><soa:LCH>LCH</soa:LCH><soa:FJDM>FJDM</soa:FJDM><soa:FJMC>FJMC</soa:FJMC><soa:DZQC>GG布衣钟落潭镇五龙岗钟升东路钟兴商业广场</soa:DZQC><soa:BM>GG布衣</soa:BM><soa:ZXJD>113.0678764</soa:ZXJD><soa:ZXWD>23.7421589</soa:ZXWD><soa:SYZTDM>SYZTDM</soa:SYZTDM><soa:QYSJ>QYSJ</soa:QYSJ><soa:TYSJ>TYSJ</soa:TYSJ><soa:GXSJ>GXSJ</soa:GXSJ><soa:PPD>PPD</soa:PPD><soa:BYZD1>BYZD1</soa:BYZD1><soa:BYZD2>BYZD2</soa:BYZD2><soa:BYZD3>BYZD3</soa:BYZD3></soa:STRUCADDR_OUT><soa:STRUCADDR_OUT><soa:CXBZ>1</soa:CXBZ><soa:GUID>00011</soa:GUID><soa:SJQHDM>sjqhdm</soa:SJQHDM><soa:SJQHMC>sjqhmc</soa:SJQHMC><soa:QXDM>QXDM</soa:QXDM><soa:QXMC>QXMC</soa:QXMC><soa:XZDM>XZDM</soa:XZDM><soa:XZMC>XZMC</soa:XZMC><soa:ZRCQHDM>ZRCQHDM</soa:ZRCQHDM><soa:ZRCQHMC>ZRCQHMC</soa:ZRCQHMC><soa:JLXDM>JLXDM</soa:JLXDM><soa:JLXMC>JLXMC</soa:JLXMC><soa:MPDM>MPDM</soa:MPDM><soa:MPMC>MPMC</soa:MPMC><soa:JZWDM>JZWDM</soa:JZWDM><soa:JZWMC>JZWMC</soa:JZWMC><soa:DYDM>DYDM</soa:DYDM><soa:DYMC>DYMC</soa:DYMC><soa:LCH>LCH</soa:LCH><soa:FJDM>FJDM</soa:FJDM><soa:FJMC>FJMC</soa:FJMC><soa:DZQC>GG布衣钟落潭镇五龙岗钟升东路钟兴商业广场</soa:DZQC><soa:BM>GG布衣</soa:BM><soa:ZXJD>113.857379</soa:ZXJD><soa:ZXWD>23.8180938</soa:ZXWD><soa:SYZTDM>SYZTDM</soa:SYZTDM><soa:QYSJ>QYSJ</soa:QYSJ><soa:TYSJ>TYSJ</soa:TYSJ><soa:GXSJ>GXSJ</soa:GXSJ><soa:PPD>PPD</soa:PPD><soa:BYZD1>BYZD1</soa:BYZD1><soa:BYZD2>BYZD2</soa:BYZD2><soa:BYZD3>BYZD3</soa:BYZD3></soa:STRUCADDR_OUT><soa:STRUCADDR_OUT><soa:CXBZ>1</soa:CXBZ><soa:GUID>00012</soa:GUID><soa:SJQHDM>sjqhdm</soa:SJQHDM><soa:SJQHMC>sjqhmc</soa:SJQHMC><soa:QXDM>QXDM</soa:QXDM><soa:QXMC>QXMC</soa:QXMC><soa:XZDM>XZDM</soa:XZDM><soa:XZMC>XZMC</soa:XZMC><soa:ZRCQHDM>ZRCQHDM</soa:ZRCQHDM><soa:ZRCQHMC>ZRCQHMC</soa:ZRCQHMC><soa:JLXDM>JLXDM</soa:JLXDM><soa:JLXMC>JLXMC</soa:JLXMC><soa:MPDM>MPDM</soa:MPDM><soa:MPMC>MPMC</soa:MPMC><soa:JZWDM>JZWDM</soa:JZWDM><soa:JZWMC>JZWMC</soa:JZWMC><soa:DYDM>DYDM</soa:DYDM><soa:DYMC>DYMC</soa:DYMC><soa:LCH>LCH</soa:LCH><soa:FJDM>FJDM</soa:FJDM><soa:FJMC>FJMC</soa:FJMC><soa:DZQC>GG布衣钟落潭镇五龙岗钟升东路钟兴商业广场</soa:DZQC><soa:BM>GG布衣</soa:BM><soa:ZXJD>113.6598024</soa:ZXJD><soa:ZXWD>23.27575737</soa:ZXWD><soa:SYZTDM>SYZTDM</soa:SYZTDM><soa:QYSJ>QYSJ</soa:QYSJ><soa:TYSJ>TYSJ</soa:TYSJ><soa:GXSJ>GXSJ</soa:GXSJ><soa:PPD>PPD</soa:PPD><soa:BYZD1>BYZD1</soa:BYZD1><soa:BYZD2>BYZD2</soa:BYZD2><soa:BYZD3>BYZD3</soa:BYZD3></soa:STRUCADDR_OUT><soa:STRUCADDR_OUT><soa:CXBZ>1</soa:CXBZ><soa:GUID>00013</soa:GUID><soa:SJQHDM>sjqhdm</soa:SJQHDM><soa:SJQHMC>sjqhmc</soa:SJQHMC><soa:QXDM>QXDM</soa:QXDM><soa:QXMC>QXMC</soa:QXMC><soa:XZDM>XZDM</soa:XZDM><soa:XZMC>XZMC</soa:XZMC><soa:ZRCQHDM>ZRCQHDM</soa:ZRCQHDM><soa:ZRCQHMC>ZRCQHMC</soa:ZRCQHMC><soa:JLXDM>JLXDM</soa:JLXDM><soa:JLXMC>JLXMC</soa:JLXMC><soa:MPDM>MPDM</soa:MPDM><soa:MPMC>MPMC</soa:MPMC><soa:JZWDM>JZWDM</soa:JZWDM><soa:JZWMC>JZWMC</soa:JZWMC><soa:DYDM>DYDM</soa:DYDM><soa:DYMC>DYMC</soa:DYMC><soa:LCH>LCH</soa:LCH><soa:FJDM>FJDM</soa:FJDM><soa:FJMC>FJMC</soa:FJMC><soa:DZQC>GG布衣钟落潭镇五龙岗钟升东路钟兴商业广场</soa:DZQC><soa:BM>GG布衣</soa:BM><soa:ZXJD>113.11784023</soa:ZXJD><soa:ZXWD>23.21693301</soa:ZXWD><soa:SYZTDM>SYZTDM</soa:SYZTDM><soa:QYSJ>QYSJ</soa:QYSJ><soa:TYSJ>TYSJ</soa:TYSJ><soa:GXSJ>GXSJ</soa:GXSJ><soa:PPD>PPD</soa:PPD><soa:BYZD1>BYZD1</soa:BYZD1><soa:BYZD2>BYZD2</soa:BYZD2><soa:BYZD3>BYZD3</soa:BYZD3></soa:STRUCADDR_OUT><soa:STRUCADDR_OUT><soa:CXBZ>1</soa:CXBZ><soa:GUID>00014</soa:GUID><soa:SJQHDM>sjqhdm</soa:SJQHDM><soa:SJQHMC>sjqhmc</soa:SJQHMC><soa:QXDM>QXDM</soa:QXDM><soa:QXMC>QXMC</soa:QXMC><soa:XZDM>XZDM</soa:XZDM><soa:XZMC>XZMC</soa:XZMC><soa:ZRCQHDM>ZRCQHDM</soa:ZRCQHDM><soa:ZRCQHMC>ZRCQHMC</soa:ZRCQHMC><soa:JLXDM>JLXDM</soa:JLXDM><soa:JLXMC>JLXMC</soa:JLXMC><soa:MPDM>MPDM</soa:MPDM><soa:MPMC>MPMC</soa:MPMC><soa:JZWDM>JZWDM</soa:JZWDM><soa:JZWMC>JZWMC</soa:JZWMC><soa:DYDM>DYDM</soa:DYDM><soa:DYMC>DYMC</soa:DYMC><soa:LCH>LCH</soa:LCH><soa:FJDM>FJDM</soa:FJDM><soa:FJMC>FJMC</soa:FJMC><soa:DZQC>GG布衣钟落潭镇五龙岗钟升东路钟兴商业广场</soa:DZQC><soa:BM>GG布衣</soa:BM><soa:ZXJD>113.53118706</soa:ZXJD><soa:ZXWD>23.5504097</soa:ZXWD><soa:SYZTDM>SYZTDM</soa:SYZTDM><soa:QYSJ>QYSJ</soa:QYSJ><soa:TYSJ>TYSJ</soa:TYSJ><soa:GXSJ>GXSJ</soa:GXSJ><soa:PPD>PPD</soa:PPD><soa:BYZD1>BYZD1</soa:BYZD1><soa:BYZD2>BYZD2</soa:BYZD2><soa:BYZD3>BYZD3</soa:BYZD3></soa:STRUCADDR_OUT><soa:STRUCADDR_OUT><soa:CXBZ>1</soa:CXBZ><soa:GUID>00015</soa:GUID><soa:SJQHDM>sjqhdm</soa:SJQHDM><soa:SJQHMC>sjqhmc</soa:SJQHMC><soa:QXDM>QXDM</soa:QXDM><soa:QXMC>QXMC</soa:QXMC><soa:XZDM>XZDM</soa:XZDM><soa:XZMC>XZMC</soa:XZMC><soa:ZRCQHDM>ZRCQHDM</soa:ZRCQHDM><soa:ZRCQHMC>ZRCQHMC</soa:ZRCQHMC><soa:JLXDM>JLXDM</soa:JLXDM><soa:JLXMC>JLXMC</soa:JLXMC><soa:MPDM>MPDM</soa:MPDM><soa:MPMC>MPMC</soa:MPMC><soa:JZWDM>JZWDM</soa:JZWDM><soa:JZWMC>JZWMC</soa:JZWMC><soa:DYDM>DYDM</soa:DYDM><soa:DYMC>DYMC</soa:DYMC><soa:LCH>LCH</soa:LCH><soa:FJDM>FJDM</soa:FJDM><soa:FJMC>FJMC</soa:FJMC><soa:DZQC>GG布衣钟落潭镇五龙岗钟升东路钟兴商业广场</soa:DZQC><soa:BM>GG布衣</soa:BM><soa:ZXJD>113.56008786</soa:ZXJD><soa:ZXWD>23.79748344</soa:ZXWD><soa:SYZTDM>SYZTDM</soa:SYZTDM><soa:QYSJ>QYSJ</soa:QYSJ><soa:TYSJ>TYSJ</soa:TYSJ><soa:GXSJ>GXSJ</soa:GXSJ><soa:PPD>PPD</soa:PPD><soa:BYZD1>BYZD1</soa:BYZD1><soa:BYZD2>BYZD2</soa:BYZD2><soa:BYZD3>BYZD3</soa:BYZD3></soa:STRUCADDR_OUT><soa:STRUCADDR_OUT><soa:CXBZ>1</soa:CXBZ><soa:GUID>00016</soa:GUID><soa:SJQHDM>sjqhdm</soa:SJQHDM><soa:SJQHMC>sjqhmc</soa:SJQHMC><soa:QXDM>QXDM</soa:QXDM><soa:QXMC>QXMC</soa:QXMC><soa:XZDM>XZDM</soa:XZDM><soa:XZMC>XZMC</soa:XZMC><soa:ZRCQHDM>ZRCQHDM</soa:ZRCQHDM><soa:ZRCQHMC>ZRCQHMC</soa:ZRCQHMC><soa:JLXDM>JLXDM</soa:JLXDM><soa:JLXMC>JLXMC</soa:JLXMC><soa:MPDM>MPDM</soa:MPDM><soa:MPMC>MPMC</soa:MPMC><soa:JZWDM>JZWDM</soa:JZWDM><soa:JZWMC>JZWMC</soa:JZWMC><soa:DYDM>DYDM</soa:DYDM><soa:DYMC>DYMC</soa:DYMC><soa:LCH>LCH</soa:LCH><soa:FJDM>FJDM</soa:FJDM><soa:FJMC>FJMC</soa:FJMC><soa:DZQC>GG布衣钟落潭镇五龙岗钟升东路钟兴商业广场</soa:DZQC><soa:BM>GG布衣</soa:BM><soa:ZXJD>113.102589905</soa:ZXJD><soa:ZXWD>23.810285</soa:ZXWD><soa:SYZTDM>SYZTDM</soa:SYZTDM><soa:QYSJ>QYSJ</soa:QYSJ><soa:TYSJ>TYSJ</soa:TYSJ><soa:GXSJ>GXSJ</soa:GXSJ><soa:PPD>PPD</soa:PPD><soa:BYZD1>BYZD1</soa:BYZD1><soa:BYZD2>BYZD2</soa:BYZD2><soa:BYZD3>BYZD3</soa:BYZD3></soa:STRUCADDR_OUT><soa:STRUCADDR_OUT><soa:CXBZ>1</soa:CXBZ><soa:GUID>00017</soa:GUID><soa:SJQHDM>sjqhdm</soa:SJQHDM><soa:SJQHMC>sjqhmc</soa:SJQHMC><soa:QXDM>QXDM</soa:QXDM><soa:QXMC>QXMC</soa:QXMC><soa:XZDM>XZDM</soa:XZDM><soa:XZMC>XZMC</soa:XZMC><soa:ZRCQHDM>ZRCQHDM</soa:ZRCQHDM><soa:ZRCQHMC>ZRCQHMC</soa:ZRCQHMC><soa:JLXDM>JLXDM</soa:JLXDM><soa:JLXMC>JLXMC</soa:JLXMC><soa:MPDM>MPDM</soa:MPDM><soa:MPMC>MPMC</soa:MPMC><soa:JZWDM>JZWDM</soa:JZWDM><soa:JZWMC>JZWMC</soa:JZWMC><soa:DYDM>DYDM</soa:DYDM><soa:DYMC>DYMC</soa:DYMC><soa:LCH>LCH</soa:LCH><soa:FJDM>FJDM</soa:FJDM><soa:FJMC>FJMC</soa:FJMC><soa:DZQC>GG布衣钟落潭镇五龙岗钟升东路钟兴商业广场</soa:DZQC><soa:BM>GG布衣</soa:BM><soa:ZXJD>113.7446151</soa:ZXJD><soa:ZXWD>23.8986448</soa:ZXWD><soa:SYZTDM>SYZTDM</soa:SYZTDM><soa:QYSJ>QYSJ</soa:QYSJ><soa:TYSJ>TYSJ</soa:TYSJ><soa:GXSJ>GXSJ</soa:GXSJ><soa:PPD>PPD</soa:PPD><soa:BYZD1>BYZD1</soa:BYZD1><soa:BYZD2>BYZD2</soa:BYZD2><soa:BYZD3>BYZD3</soa:BYZD3></soa:STRUCADDR_OUT><soa:STRUCADDR_OUT><soa:CXBZ>1</soa:CXBZ><soa:GUID>00018</soa:GUID><soa:SJQHDM>sjqhdm</soa:SJQHDM><soa:SJQHMC>sjqhmc</soa:SJQHMC><soa:QXDM>QXDM</soa:QXDM><soa:QXMC>QXMC</soa:QXMC><soa:XZDM>XZDM</soa:XZDM><soa:XZMC>XZMC</soa:XZMC><soa:ZRCQHDM>ZRCQHDM</soa:ZRCQHDM><soa:ZRCQHMC>ZRCQHMC</soa:ZRCQHMC><soa:JLXDM>JLXDM</soa:JLXDM><soa:JLXMC>JLXMC</soa:JLXMC><soa:MPDM>MPDM</soa:MPDM><soa:MPMC>MPMC</soa:MPMC><soa:JZWDM>JZWDM</soa:JZWDM><soa:JZWMC>JZWMC</soa:JZWMC><soa:DYDM>DYDM</soa:DYDM><soa:DYMC>DYMC</soa:DYMC><soa:LCH>LCH</soa:LCH><soa:FJDM>FJDM</soa:FJDM><soa:FJMC>FJMC</soa:FJMC><soa:DZQC>GG布衣钟落潭镇五龙岗钟升东路钟兴商业广场</soa:DZQC><soa:BM>GG布衣</soa:BM><soa:ZXJD>113.3806888</soa:ZXJD><soa:ZXWD>23.90371126</soa:ZXWD><soa:SYZTDM>SYZTDM</soa:SYZTDM><soa:QYSJ>QYSJ</soa:QYSJ><soa:TYSJ>TYSJ</soa:TYSJ><soa:GXSJ>GXSJ</soa:GXSJ><soa:PPD>PPD</soa:PPD><soa:BYZD1>BYZD1</soa:BYZD1><soa:BYZD2>BYZD2</soa:BYZD2><soa:BYZD3>BYZD3</soa:BYZD3></soa:STRUCADDR_OUT><soa:STRUCADDR_OUT><soa:CXBZ>1</soa:CXBZ><soa:GUID>00019</soa:GUID><soa:SJQHDM>sjqhdm</soa:SJQHDM><soa:SJQHMC>sjqhmc</soa:SJQHMC><soa:QXDM>QXDM</soa:QXDM><soa:QXMC>QXMC</soa:QXMC><soa:XZDM>XZDM</soa:XZDM><soa:XZMC>XZMC</soa:XZMC><soa:ZRCQHDM>ZRCQHDM</soa:ZRCQHDM><soa:ZRCQHMC>ZRCQHMC</soa:ZRCQHMC><soa:JLXDM>JLXDM</soa:JLXDM><soa:JLXMC>JLXMC</soa:JLXMC><soa:MPDM>MPDM</soa:MPDM><soa:MPMC>MPMC</soa:MPMC><soa:JZWDM>JZWDM</soa:JZWDM><soa:JZWMC>JZWMC</soa:JZWMC><soa:DYDM>DYDM</soa:DYDM><soa:DYMC>DYMC</soa:DYMC><soa:LCH>LCH</soa:LCH><soa:FJDM>FJDM</soa:FJDM><soa:FJMC>FJMC</soa:FJMC><soa:DZQC>GG布衣钟落潭镇五龙岗钟升东路钟兴商业广场</soa:DZQC><soa:BM>GG布衣</soa:BM><soa:ZXJD>113.9079939</soa:ZXJD><soa:ZXWD>23.36891252</soa:ZXWD><soa:SYZTDM>SYZTDM</soa:SYZTDM><soa:QYSJ>QYSJ</soa:QYSJ><soa:TYSJ>TYSJ</soa:TYSJ><soa:GXSJ>GXSJ</soa:GXSJ><soa:PPD>PPD</soa:PPD><soa:BYZD1>BYZD1</soa:BYZD1><soa:BYZD2>BYZD2</soa:BYZD2><soa:BYZD3>BYZD3</soa:BYZD3></soa:STRUCADDR_OUT><soa:STRUCADDR_OUT><soa:CXBZ>1</soa:CXBZ><soa:GUID>00020</soa:GUID><soa:SJQHDM>sjqhdm</soa:SJQHDM><soa:SJQHMC>sjqhmc</soa:SJQHMC><soa:QXDM>QXDM</soa:QXDM><soa:QXMC>QXMC</soa:QXMC><soa:XZDM>XZDM</soa:XZDM><soa:XZMC>XZMC</soa:XZMC><soa:ZRCQHDM>ZRCQHDM</soa:ZRCQHDM><soa:ZRCQHMC>ZRCQHMC</soa:ZRCQHMC><soa:JLXDM>JLXDM</soa:JLXDM><soa:JLXMC>JLXMC</soa:JLXMC><soa:MPDM>MPDM</soa:MPDM><soa:MPMC>MPMC</soa:MPMC><soa:JZWDM>JZWDM</soa:JZWDM><soa:JZWMC>JZWMC</soa:JZWMC><soa:DYDM>DYDM</soa:DYDM><soa:DYMC>DYMC</soa:DYMC><soa:LCH>LCH</soa:LCH><soa:FJDM>FJDM</soa:FJDM><soa:FJMC>FJMC</soa:FJMC><soa:DZQC>GG布衣钟落潭镇五龙岗钟升东路钟兴商业广场</soa:DZQC><soa:BM>GG布衣</soa:BM><soa:ZXJD>113.7413271</soa:ZXJD><soa:ZXWD>23.036522448</soa:ZXWD><soa:SYZTDM>SYZTDM</soa:SYZTDM><soa:QYSJ>QYSJ</soa:QYSJ><soa:TYSJ>TYSJ</soa:TYSJ><soa:GXSJ>GXSJ</soa:GXSJ><soa:PPD>PPD</soa:PPD><soa:BYZD1>BYZD1</soa:BYZD1><soa:BYZD2>BYZD2</soa:BYZD2><soa:BYZD3>BYZD3</soa:BYZD3></soa:STRUCADDR_OUT><soa:replyCode>OK</soa:replyCode></getGetStrucAddressResponse></soap:Body></soap:Envelope>";
		
		addressInfoXML="<SOAP-ENV:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:SOAP-ENC=\"http://schemas.xmlsoap.org/soap/encoding/\" xmlns:SOAP-ENV=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:soa=\"http://soa.csg.cn\"><SOAP-ENV:Body><soa:getStrucAddressResponse><soa:STRUCADDR_OUT><soa:CXBZ>cxbz</soa:CXBZ><soa:GUID>13F9ED7E-C0E3-499F-BB8C-B42105798645</soa:GUID><soa:SJQHDM>440100</soa:SJQHDM><soa:SJQHMC>广州市</soa:SJQHMC><soa:QXDM>440105</soa:QXDM><soa:QXMC>海珠区</soa:QXMC><soa:XZDM>440105009</soa:XZDM><soa:XZMC>龙凤街道</soa:XZMC><soa:ZRCQHDM>440105009102</soa:ZRCQHDM><soa:ZRCQHMC>新民社区</soa:ZRCQHMC><soa:JLXDM></soa:JLXDM><soa:JLXMC>新民四街</soa:JLXMC><soa:MPDM>21号</soa:MPDM><soa:JZWDM></soa:JZWDM><soa:JZWMC></soa:JZWMC><soa:DYDM></soa:DYDM><soa:DYMC></soa:DYMC><soa:LCH>3楼</soa:LCH><soa:FJDM></soa:FJDM><soa:FJMC>303房</soa:FJMC><soa:DZQC>广州市海珠区龙凤街道新民社区新民四街21号3楼303房</soa:DZQC><soa:BM></soa:BM><soa:ZXJD>113.24733</soa:ZXJD><soa:ZXWD>23.0971</soa:ZXWD><soa:SYZTDM>1</soa:SYZTDM><soa:QYSJ>2018-07-22 00:00:00</soa:QYSJ><soa:TYSJ></soa:TYSJ><soa:GXSJ>2018-07-23 10:28:05</soa:GXSJ><soa:PPD>0.139</soa:PPD><soa:BYZD1>1407983</soa:BYZD1></soa:STRUCADDR_OUT><soa:replyCode>ok</soa:replyCode></soa:getStrucAddressResponse></SOAP-ENV:Body></SOAP-ENV:Envelope>";
		
		if(StringUtils.isNotEmpty(addressInfoXML)){
			json.put("code", 1);
			json.put("message", "成功");
			json.put("addressInfo", addressInfoXML);
		}else{
			json.put("code", 0);
			json.put("message", "失败");
			json.put("addressInfo", "");
		}
		return json;
	}
	/**
	 * 调用结构化地址接口
	 * @param addressSN
	 * @return
	 */
	private String getAddressReserveInfo(String addressSN){
		//拼接请求报文
		StringBuffer sb=new StringBuffer();
		sb.append("<soapenv:Envelope xmlns:soapenv='http://schemas.xmlsoap.org/soap/envelope/' xmlns:soa='http://soa.csg.cn'>");
		sb.append("<soapenv:Header/>");
		sb.append("<soapenv:Body>");
		sb.append("<soa:getStrucAddressRequest>");
		sb.append("<soa:STRUCADDR_IN>");
		sb.append("<soa:CXBZ>cxbz</soa:CXBZ>");
		sb.append("<soa:CXNR>");
		sb.append(addressSN);
		sb.append("</soa:CXNR>");
		sb.append("<soa:AK>ak</soa:AK>");
		sb.append("<soa:BM></soa:BM>");
		sb.append("<soa:XCTS></soa:XCTS>");
		sb.append("</soa:STRUCADDR_IN>");
		sb.append("</soa:getStrucAddressRequest>");
		sb.append("</soapenv:Body>");
		sb.append("</soapenv:Envelope>");
		
		String str=HttpClientCallSoapUtil.doPostSoap1_1(this.getServerURL(), sb.toString());
		return str;
	}
	
	/**
	 * 测试
	 * @param args
	 */
	public static void main(String[] args) {
		String retStr=new GetAddressInfo().getAddressReserveInfo("13F9ED7E-C0E3-499F-BB8C-B42105798645");
		System.out.println("结构化地址信息:"+retStr);
		//retStr=<?xml version="1.0" encoding="UTF-8"?><SOAP-ENV:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:soa="http://soa.csg.cn"><SOAP-ENV:Body><soa:getStrucAddressResponse><soa:STRUCADDR_OUT><soa:CXBZ>cxbz</soa:CXBZ><soa:GUID>13F9ED7E-C0E3-499F-BB8C-B42105798645</soa:GUID><soa:SJQHDM>440100</soa:SJQHDM><soa:SJQHMC>广州市</soa:SJQHMC><soa:QXDM>440105</soa:QXDM><soa:QXMC>海珠区</soa:QXMC><soa:XZDM>440105009</soa:XZDM><soa:XZMC>龙凤街道</soa:XZMC><soa:ZRCQHDM>440105009102</soa:ZRCQHDM><soa:ZRCQHMC>新民社区</soa:ZRCQHMC><soa:JLXDM></soa:JLXDM><soa:JLXMC>新民四街</soa:JLXMC><soa:MPDM>21号</soa:MPDM><soa:JZWDM></soa:JZWDM><soa:JZWMC></soa:JZWMC><soa:DYDM></soa:DYDM><soa:DYMC></soa:DYMC><soa:LCH>3楼</soa:LCH><soa:FJDM></soa:FJDM><soa:FJMC>303房</soa:FJMC><soa:DZQC>广州市海珠区龙凤街道新民社区新民四街21号3楼303房</soa:DZQC><soa:BM></soa:BM><soa:ZXJD>113.24733</soa:ZXJD><soa:ZXWD>23.0971</soa:ZXWD><soa:SYZTDM>1</soa:SYZTDM><soa:QYSJ>2018-07-22 00:00:00</soa:QYSJ><soa:TYSJ></soa:TYSJ><soa:GXSJ>2018-07-23 10:28:05</soa:GXSJ><soa:PPD>0.139</soa:PPD><soa:BYZD1>1407983</soa:BYZD1></soa:STRUCADDR_OUT><soa:replyCode>ok</soa:replyCode></soa:getStrucAddressResponse></SOAP-ENV:Body></SOAP-ENV:Envelope>
	 
	}
	
}
